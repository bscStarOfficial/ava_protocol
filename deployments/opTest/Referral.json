{
  "address": "0xDB832Dff615657803dC05AA00DbBFF90a6Bf3249",
  "abi": [
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_root",
          "type": "address"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "user",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "address",
          "name": "parent",
          "type": "address"
        }
      ],
      "name": "BindReferral",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "user",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "newOwner",
          "type": "address"
        }
      ],
      "name": "OwnershipTransferred",
      "type": "event"
    },
    {
      "inputs": [],
      "name": "abandonedBalanceOwner",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_referral",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "_user",
          "type": "address"
        }
      ],
      "name": "bindReferral",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_address",
          "type": "address"
        }
      ],
      "name": "getReferral",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_address",
          "type": "address"
        }
      ],
      "name": "getReferralCount",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_address",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "_num",
          "type": "uint256"
        }
      ],
      "name": "getReferrals",
      "outputs": [
        {
          "internalType": "address[]",
          "name": "",
          "type": "address[]"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "getRootAddress",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_address",
          "type": "address"
        }
      ],
      "name": "isBindReferral",
      "outputs": [
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "owner",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "rootAddress",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_stakingContract",
          "type": "address"
        }
      ],
      "name": "setStakingContract",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "stakingContract",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "newOwner",
          "type": "address"
        }
      ],
      "name": "transferOwnership",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_referral",
          "type": "address"
        }
      ],
      "name": "userBindReferral",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    }
  ],
  "transactionHash": "0x7ad32284a2aa68dbce42486ad452d796df6dbe3065e7519e00ba3dbd6a2dfbe1",
  "receipt": {
    "to": null,
    "from": "0x93174A96E8A4823C5aBBB74900D5bACBA2e774b0",
    "contractAddress": "0xDB832Dff615657803dC05AA00DbBFF90a6Bf3249",
    "transactionIndex": 1,
    "gasUsed": "704720",
    "logsBloom": "0x00000000000000000000000000000000001000000000000000800000000000000000000000000400000000000000000000000000000000000000000000000000000000000000000000000004000000000001000000000020000000000000000010000000020000000000000004000800000000000800000000000000000000400000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000010000000000000000000000000000020000000000000000000000000000000000000008000000000000800000000000000",
    "blockHash": "0xc4d21cb83dc041d8c764795fa0a68da663de91dc56cb36aca58b57a74603d80d",
    "transactionHash": "0x7ad32284a2aa68dbce42486ad452d796df6dbe3065e7519e00ba3dbd6a2dfbe1",
    "logs": [
      {
        "transactionIndex": 1,
        "blockNumber": 98760273,
        "transactionHash": "0x7ad32284a2aa68dbce42486ad452d796df6dbe3065e7519e00ba3dbd6a2dfbe1",
        "address": "0xDB832Dff615657803dC05AA00DbBFF90a6Bf3249",
        "topics": [
          "0x8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e0",
          "0x0000000000000000000000000000000000000000000000000000000000000000",
          "0x00000000000000000000000093174a96e8a4823c5abbb74900d5bacba2e774b0"
        ],
        "data": "0x",
        "logIndex": 0,
        "blockHash": "0xc4d21cb83dc041d8c764795fa0a68da663de91dc56cb36aca58b57a74603d80d"
      },
      {
        "transactionIndex": 1,
        "blockNumber": 98760273,
        "transactionHash": "0x7ad32284a2aa68dbce42486ad452d796df6dbe3065e7519e00ba3dbd6a2dfbe1",
        "address": "0xDB832Dff615657803dC05AA00DbBFF90a6Bf3249",
        "topics": [
          "0xcb282389824b9ba09f76f40ee522be8104006b13f0a7a8d78c2198a1cd1da468",
          "0x000000000000000000000000eaa5e6c412700f93b232df91c4ce5da0c675376c"
        ],
        "data": "0x000000000000000000000000eaa5e6c412700f93b232df91c4ce5da0c675376c",
        "logIndex": 1,
        "blockHash": "0xc4d21cb83dc041d8c764795fa0a68da663de91dc56cb36aca58b57a74603d80d"
      }
    ],
    "blockNumber": 98760273,
    "cumulativeGasUsed": "748547",
    "status": 1,
    "byzantium": true
  },
  "args": [
    "0xEaA5e6c412700F93b232Df91C4Ce5da0C675376C"
  ],
  "numDeployments": 1,
  "solcInputHash": "8ff272df8698a453b868410b6d2637c8",
  "metadata": "{\"compiler\":{\"version\":\"0.8.20+commit.a1b79de6\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_root\",\"type\":\"address\"}],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"user\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"address\",\"name\":\"parent\",\"type\":\"address\"}],\"name\":\"BindReferral\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"user\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"newOwner\",\"type\":\"address\"}],\"name\":\"OwnershipTransferred\",\"type\":\"event\"},{\"inputs\":[],\"name\":\"abandonedBalanceOwner\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_referral\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"_user\",\"type\":\"address\"}],\"name\":\"bindReferral\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_address\",\"type\":\"address\"}],\"name\":\"getReferral\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_address\",\"type\":\"address\"}],\"name\":\"getReferralCount\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_address\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"_num\",\"type\":\"uint256\"}],\"name\":\"getReferrals\",\"outputs\":[{\"internalType\":\"address[]\",\"name\":\"\",\"type\":\"address[]\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"getRootAddress\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_address\",\"type\":\"address\"}],\"name\":\"isBindReferral\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"rootAddress\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_stakingContract\",\"type\":\"address\"}],\"name\":\"setStakingContract\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"stakingContract\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"newOwner\",\"type\":\"address\"}],\"name\":\"transferOwnership\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_referral\",\"type\":\"address\"}],\"name\":\"userBindReferral\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"}],\"devdoc\":{\"details\":\"Manages a referral system where users can be linked to their referrers, creating a hierarchical structure. It tracks direct referrals and allows traversal up the referral chain.\",\"kind\":\"dev\",\"methods\":{\"bindReferral(address,address)\":{\"details\":\"Binds a user to a referrer. This function is expected to be called by another contract (e.g., Staking contract) which performs its own checks.\",\"params\":{\"_referral\":\"The referrer's address.\",\"_user\":\"The user's address to be bound.\"}},\"constructor\":{\"details\":\"Sets the root address of the referral tree. The root is considered its own referrer to allow the first level of referrals.\"},\"getReferral(address)\":{\"details\":\"Gets the referrer of a given address.\",\"params\":{\"_address\":\"The address to query.\"},\"returns\":{\"_0\":\"The referrer's address, or address(0) if none.\"}},\"getReferralCount(address)\":{\"details\":\"Gets the number of direct referrals for a given address.\",\"params\":{\"_address\":\"The address to query.\"},\"returns\":{\"_0\":\"The count of direct referrals.\"}},\"getReferrals(address,uint256)\":{\"details\":\"Retrieves the referral chain for a user, up to a specified number of levels.\",\"params\":{\"_address\":\"The user's address.\",\"_num\":\"The maximum number of upline referrals to retrieve.\"},\"returns\":{\"_0\":\"An array of addresses representing the referral chain, from direct parent upwards.\"}},\"getRootAddress()\":{\"details\":\"Returns the root address of the referral system.\"},\"isBindReferral(address)\":{\"details\":\"Checks if an address is part of the referral system.\",\"params\":{\"_address\":\"The address to check.\"},\"returns\":{\"_0\":\"True if the address has a referrer, false otherwise.\"}},\"setStakingContract(address)\":{\"details\":\"Sets the Staking contract address that is allowed to bind referrals.\"}},\"title\":\"Referral Contract\",\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{},\"version\":1}},\"settings\":{\"compilationTarget\":{\"contracts/Referral.sol\":\"Referral\"},\"evmVersion\":\"paris\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\",\"useLiteralContent\":true},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[]},\"sources\":{\"contracts/Referral.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.13;\\n\\nimport \\\"./interfaces/IReferral.sol\\\";\\nimport \\\"./abstract/Owned.sol\\\";\\n\\n/**\\n * @title Referral Contract\\n * @dev Manages a referral system where users can be linked to their referrers,\\n * creating a hierarchical structure. It tracks direct referrals and allows\\n * traversal up the referral chain.\\n */\\ncontract Referral is IReferral, Owned {\\n    address public rootAddress;\\n    address public stakingContract;\\n\\n    // Mapping from a user to their referrer.\\n    mapping(address => address) private _referrals;\\n\\n    // Mapping from a referrer to their list of direct children.\\n    mapping(address => address[]) private _children;\\n\\n    /**\\n     * @dev Sets the root address of the referral tree.\\n     * The root is considered its own referrer to allow the first level of referrals.\\n     */\\n    constructor(address _root) Owned(msg.sender) {\\n        require(_root != address(0), \\\"Root address cannot be zero\\\");\\n        rootAddress = _root;\\n        _referrals[_root] = _root; // Root is its own parent to satisfy isBindReferral for the first level.\\n        emit BindReferral(_root, _root);\\n    }\\n\\n    modifier onlyStaking() {\\n        require(msg.sender == stakingContract, \\\"Caller is not the staking contract\\\");\\n        _;\\n    }\\n\\n    /**\\n     * @dev Sets the Staking contract address that is allowed to bind referrals.\\n     */\\n    function setStakingContract(address _stakingContract) external onlyOwner {\\n        require(_stakingContract != address(0), \\\"Staking contract cannot be zero\\\");\\n        stakingContract = _stakingContract;\\n    }\\n\\n    /**\\n     * @dev Returns the root address of the referral system.\\n     */\\n    function getRootAddress() external view override returns (address) {\\n        return rootAddress;\\n    }\\n\\n    /**\\n     * @dev Gets the referrer of a given address.\\n     * @param _address The address to query.\\n     * @return The referrer's address, or address(0) if none.\\n     */\\n    function getReferral(address _address) external view override returns (address) {\\n        return _referrals[_address];\\n    }\\n\\n    /**\\n     * @dev Checks if an address is part of the referral system.\\n     * @param _address The address to check.\\n     * @return True if the address has a referrer, false otherwise.\\n     */\\n    function isBindReferral(address _address) external view override returns (bool) {\\n        return _referrals[_address] != address(0);\\n    }\\n\\n    /**\\n     * @dev Gets the number of direct referrals for a given address.\\n     * @param _address The address to query.\\n     * @return The count of direct referrals.\\n     */\\n    function getReferralCount(address _address) external view override returns (uint256) {\\n        return _children[_address].length;\\n    }\\n\\n    /**\\n     * @dev Retrieves the referral chain for a user, up to a specified number of levels.\\n     * @param _address The user's address.\\n     * @param _num The maximum number of upline referrals to retrieve.\\n     * @return An array of addresses representing the referral chain, from direct parent upwards.\\n     */\\n    function getReferrals(address _address, uint256 _num) external view override returns (address[] memory) {\\n        address[] memory path = new address[](_num);\\n        uint256 count = 0;\\n        address currentParent = _referrals[_address];\\n\\n        // Traverse up the referral chain.\\n        // The condition `currentParent != _address` prevents an infinite loop if an address is its own referrer (like the root).\\n        while (currentParent != address(0) && currentParent != _address && count < _num) {\\n            path[count] = currentParent;\\n            count++;\\n            if (currentParent == rootAddress) {\\n                break;\\n            }\\n            currentParent = _referrals[currentParent];\\n        }\\n\\n        // Copy the results into a correctly sized array.\\n        address[] memory result = new address[](count);\\n        for (uint i = 0; i < count; i++) {\\n            result[i] = path[i];\\n        }\\n        return result;\\n    }\\n\\n    /**\\n     * @dev Binds a user to a referrer.\\n     * This function is expected to be called by another contract (e.g., Staking contract)\\n     * which performs its own checks.\\n     * @param _referral The referrer's address.\\n     * @param _user The user's address to be bound.\\n     */\\n    function bindReferral(address _referral, address _user) external override onlyStaking {\\n        require(_user != address(0), \\\"User is zero address\\\");\\n        require(_referral != address(0), \\\"Referral is zero address\\\");\\n        require(_user != _referral, \\\"User and referral cannot be the same\\\");\\n        require(_referrals[_user] == address(0), \\\"User already has a referral\\\");\\n        require(_referrals[_referral] != address(0), \\\"Referral is not bound\\\");\\n\\n        _referrals[_user] = _referral;\\n        _children[_referral].push(_user);\\n\\n        emit BindReferral(_user, _referral);\\n    }\\n\\n    function userBindReferral(address _referral) external {\\n        address _user = msg.sender;\\n        require(_referral != address(0), \\\"Referral is zero address\\\");\\n        require(_referrals[_user] == address(0), \\\"User already has a referral\\\");\\n        require(_referrals[_referral] != address(0), \\\"Referral is not bound\\\");\\n\\n        _referrals[_user] = _referral;\\n        _children[_referral].push(_user);\\n\\n        emit BindReferral(_user, _referral);\\n    }\\n}\\n\",\"keccak256\":\"0x535c2b650bf2fed154bb08c43499138b1061c034af5ab94c90369e21f7d81103\",\"license\":\"MIT\"},\"contracts/abstract/Owned.sol\":{\"content\":\"// SPDX-License-Identifier: AGPL-3.0-only\\npragma solidity >=0.8.0;\\n\\n/// @notice Simple single owner authorization mixin.\\n/// @author Solmate (https://github.com/transmissions11/solmate/blob/main/src/auth/Owned.sol)\\nabstract contract Owned {\\n    /*//////////////////////////////////////////////////////////////\\n                                 EVENTS\\n    //////////////////////////////////////////////////////////////*/\\n\\n    event OwnershipTransferred(address indexed user, address indexed newOwner);\\n\\n    /*//////////////////////////////////////////////////////////////\\n                            OWNERSHIP STORAGE\\n    //////////////////////////////////////////////////////////////*/\\n\\n    address public owner;\\n    // If a user mistakenly transfers tokens to this contract, this account can withdraw them.\\n    address public abandonedBalanceOwner;\\n\\n    modifier onlyOwner() virtual {\\n        require(msg.sender == owner, \\\"UNAUTHORIZED\\\");\\n\\n        _;\\n    }\\n\\n    /*//////////////////////////////////////////////////////////////\\n                               CONSTRUCTOR\\n    //////////////////////////////////////////////////////////////*/\\n\\n    constructor(address _owner) {\\n        owner = _owner;\\n        abandonedBalanceOwner = _owner;\\n\\n        emit OwnershipTransferred(address(0), _owner);\\n    }\\n\\n    /*//////////////////////////////////////////////////////////////\\n                             OWNERSHIP LOGIC\\n    //////////////////////////////////////////////////////////////*/\\n\\n    function transferOwnership(address newOwner) public virtual onlyOwner {\\n        owner = newOwner;\\n\\n        emit OwnershipTransferred(msg.sender, newOwner);\\n    }\\n}\\n\",\"keccak256\":\"0xb3c7ac4b3be5a92cd11c071810155db6ac6a1b2234363727c24cc81748cb4dd4\",\"license\":\"AGPL-3.0-only\"},\"contracts/interfaces/IReferral.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.13;\\n\\ninterface IReferral{\\n    \\n    event BindReferral(address indexed user,address parent);\\n    \\n    function getReferral(address _address)external view returns(address);\\n\\n    function isBindReferral(address _address) external view returns(bool);\\n\\n    function getReferralCount(address _address) external view returns(uint256);\\n\\n    function bindReferral(address _referral,address _user) external;\\n\\n    function getReferrals(address _address,uint256 _num) external view returns(address[] memory);\\n\\n    function getRootAddress()external view returns(address);\\n}\",\"keccak256\":\"0xbf02589354ae9980e2cf3665d08330f371c6353ebb598a3849d28644a3a5d6d3\",\"license\":\"MIT\"}},\"version\":1}",
  "bytecode": "0x608060405234801561001057600080fd5b50604051610b88380380610b8883398101604081905261002f91610147565b60008054336001600160a01b031991821681178355600180549092168117909155604051909182917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e0908290a3506001600160a01b0381166100d75760405162461bcd60e51b815260206004820152601b60248201527f526f6f7420616464726573732063616e6e6f74206265207a65726f0000000000604482015260640160405180910390fd5b600280546001600160a01b0383166001600160a01b0319918216811790925560008281526004602090815260409182902080549093168417909255518281527fcb282389824b9ba09f76f40ee522be8104006b13f0a7a8d78c2198a1cd1da468910160405180910390a250610177565b60006020828403121561015957600080fd5b81516001600160a01b038116811461017057600080fd5b9392505050565b610a02806101866000396000f3fe608060405234801561001057600080fd5b50600436106100cf5760003560e01c80638da5cb5b1161008c578063ee99205c11610066578063ee99205c146101e8578063eec76e04146101fb578063f2fde38b14610239578063f6d5660f1461024c57600080fd5b80638da5cb5b146101af5780639dd373b9146101c2578063aaa2b8c8146101d557600080fd5b806324acbd69146100d457806332a00d8e146101105780633b0f0f2f146101305780636946431b146101745780637a9a433c1461018957806388a3e9e31461019c575b600080fd5b6100fd6100e23660046108ad565b6001600160a01b031660009081526005602052604090205490565b6040519081526020015b60405180910390f35b61012361011e3660046108cf565b61025d565b60405161010791906108f9565b61015c61013e3660046108ad565b6001600160a01b039081166000908152600460205260409020541690565b6040516001600160a01b039091168152602001610107565b6101876101823660046108ad565b610420565b005b610187610197366004610946565b6105cc565b60015461015c906001600160a01b031681565b60005461015c906001600160a01b031681565b6101876101d03660046108ad565b61073c565b60025461015c906001600160a01b031681565b60035461015c906001600160a01b031681565b6102296102093660046108ad565b6001600160a01b0390811660009081526004602052604090205416151590565b6040519015158152602001610107565b6101876102473660046108ad565b6107fd565b6002546001600160a01b031661015c565b606060008267ffffffffffffffff81111561027a5761027a610979565b6040519080825280602002602001820160405280156102a3578160200160208202803683370190505b506001600160a01b0380861660009081526004602052604081205492935091165b6001600160a01b038116158015906102ee5750856001600160a01b0316816001600160a01b031614155b80156102f957508482105b1561036d57808383815181106103115761031161098f565b6001600160a01b039092166020928302919091019091015281610333816109a5565b6002549093506001600160a01b03838116911614905061036d576001600160a01b03908116600090815260046020526040902054166102c4565b60008267ffffffffffffffff81111561038857610388610979565b6040519080825280602002602001820160405280156103b1578160200160208202803683370190505b50905060005b83811015610415578481815181106103d1576103d161098f565b60200260200101518282815181106103eb576103eb61098f565b6001600160a01b03909216602092830291909101909101528061040d816109a5565b9150506103b7565b509695505050505050565b336001600160a01b0382166104775760405162461bcd60e51b8152602060048201526018602482015277526566657272616c206973207a65726f206164647265737360401b60448201526064015b60405180910390fd5b6001600160a01b0381811660009081526004602052604090205416156104df5760405162461bcd60e51b815260206004820152601b60248201527f5573657220616c726561647920686173206120726566657272616c0000000000604482015260640161046e565b6001600160a01b038281166000908152600460205260409020541661053e5760405162461bcd60e51b8152602060048201526015602482015274149959995c9c985b081a5cc81b9bdd08189bdd5b99605a1b604482015260640161046e565b6001600160a01b03818116600081815260046020908152604080832080549588166001600160a01b031996871681179091558084526005835281842080546001810182559085529383902090930180549095168417909455925190815290917fcb282389824b9ba09f76f40ee522be8104006b13f0a7a8d78c2198a1cd1da468910160405180910390a25050565b6003546001600160a01b031633146106315760405162461bcd60e51b815260206004820152602260248201527f43616c6c6572206973206e6f7420746865207374616b696e6720636f6e74726160448201526118dd60f21b606482015260840161046e565b6001600160a01b03811661067e5760405162461bcd60e51b815260206004820152601460248201527355736572206973207a65726f206164647265737360601b604482015260640161046e565b6001600160a01b0382166106cf5760405162461bcd60e51b8152602060048201526018602482015277526566657272616c206973207a65726f206164647265737360401b604482015260640161046e565b816001600160a01b0316816001600160a01b0316036104775760405162461bcd60e51b8152602060048201526024808201527f5573657220616e6420726566657272616c2063616e6e6f74206265207468652060448201526373616d6560e01b606482015260840161046e565b6000546001600160a01b031633146107855760405162461bcd60e51b815260206004820152600c60248201526b15539055551213d49256915160a21b604482015260640161046e565b6001600160a01b0381166107db5760405162461bcd60e51b815260206004820152601f60248201527f5374616b696e6720636f6e74726163742063616e6e6f74206265207a65726f00604482015260640161046e565b600380546001600160a01b0319166001600160a01b0392909216919091179055565b6000546001600160a01b031633146108465760405162461bcd60e51b815260206004820152600c60248201526b15539055551213d49256915160a21b604482015260640161046e565b600080546001600160a01b0319166001600160a01b0383169081178255604051909133917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e09190a350565b80356001600160a01b03811681146108a857600080fd5b919050565b6000602082840312156108bf57600080fd5b6108c882610891565b9392505050565b600080604083850312156108e257600080fd5b6108eb83610891565b946020939093013593505050565b6020808252825182820181905260009190848201906040850190845b8181101561093a5783516001600160a01b031683529284019291840191600101610915565b50909695505050505050565b6000806040838503121561095957600080fd5b61096283610891565b915061097060208401610891565b90509250929050565b634e487b7160e01b600052604160045260246000fd5b634e487b7160e01b600052603260045260246000fd5b6000600182016109c557634e487b7160e01b600052601160045260246000fd5b506001019056fea2646970667358221220e0a759fcee060d44415f0b2f806758b372c649379f7779ccb4b5db1a697f6d0264736f6c63430008140033",
  "deployedBytecode": "0x608060405234801561001057600080fd5b50600436106100cf5760003560e01c80638da5cb5b1161008c578063ee99205c11610066578063ee99205c146101e8578063eec76e04146101fb578063f2fde38b14610239578063f6d5660f1461024c57600080fd5b80638da5cb5b146101af5780639dd373b9146101c2578063aaa2b8c8146101d557600080fd5b806324acbd69146100d457806332a00d8e146101105780633b0f0f2f146101305780636946431b146101745780637a9a433c1461018957806388a3e9e31461019c575b600080fd5b6100fd6100e23660046108ad565b6001600160a01b031660009081526005602052604090205490565b6040519081526020015b60405180910390f35b61012361011e3660046108cf565b61025d565b60405161010791906108f9565b61015c61013e3660046108ad565b6001600160a01b039081166000908152600460205260409020541690565b6040516001600160a01b039091168152602001610107565b6101876101823660046108ad565b610420565b005b610187610197366004610946565b6105cc565b60015461015c906001600160a01b031681565b60005461015c906001600160a01b031681565b6101876101d03660046108ad565b61073c565b60025461015c906001600160a01b031681565b60035461015c906001600160a01b031681565b6102296102093660046108ad565b6001600160a01b0390811660009081526004602052604090205416151590565b6040519015158152602001610107565b6101876102473660046108ad565b6107fd565b6002546001600160a01b031661015c565b606060008267ffffffffffffffff81111561027a5761027a610979565b6040519080825280602002602001820160405280156102a3578160200160208202803683370190505b506001600160a01b0380861660009081526004602052604081205492935091165b6001600160a01b038116158015906102ee5750856001600160a01b0316816001600160a01b031614155b80156102f957508482105b1561036d57808383815181106103115761031161098f565b6001600160a01b039092166020928302919091019091015281610333816109a5565b6002549093506001600160a01b03838116911614905061036d576001600160a01b03908116600090815260046020526040902054166102c4565b60008267ffffffffffffffff81111561038857610388610979565b6040519080825280602002602001820160405280156103b1578160200160208202803683370190505b50905060005b83811015610415578481815181106103d1576103d161098f565b60200260200101518282815181106103eb576103eb61098f565b6001600160a01b03909216602092830291909101909101528061040d816109a5565b9150506103b7565b509695505050505050565b336001600160a01b0382166104775760405162461bcd60e51b8152602060048201526018602482015277526566657272616c206973207a65726f206164647265737360401b60448201526064015b60405180910390fd5b6001600160a01b0381811660009081526004602052604090205416156104df5760405162461bcd60e51b815260206004820152601b60248201527f5573657220616c726561647920686173206120726566657272616c0000000000604482015260640161046e565b6001600160a01b038281166000908152600460205260409020541661053e5760405162461bcd60e51b8152602060048201526015602482015274149959995c9c985b081a5cc81b9bdd08189bdd5b99605a1b604482015260640161046e565b6001600160a01b03818116600081815260046020908152604080832080549588166001600160a01b031996871681179091558084526005835281842080546001810182559085529383902090930180549095168417909455925190815290917fcb282389824b9ba09f76f40ee522be8104006b13f0a7a8d78c2198a1cd1da468910160405180910390a25050565b6003546001600160a01b031633146106315760405162461bcd60e51b815260206004820152602260248201527f43616c6c6572206973206e6f7420746865207374616b696e6720636f6e74726160448201526118dd60f21b606482015260840161046e565b6001600160a01b03811661067e5760405162461bcd60e51b815260206004820152601460248201527355736572206973207a65726f206164647265737360601b604482015260640161046e565b6001600160a01b0382166106cf5760405162461bcd60e51b8152602060048201526018602482015277526566657272616c206973207a65726f206164647265737360401b604482015260640161046e565b816001600160a01b0316816001600160a01b0316036104775760405162461bcd60e51b8152602060048201526024808201527f5573657220616e6420726566657272616c2063616e6e6f74206265207468652060448201526373616d6560e01b606482015260840161046e565b6000546001600160a01b031633146107855760405162461bcd60e51b815260206004820152600c60248201526b15539055551213d49256915160a21b604482015260640161046e565b6001600160a01b0381166107db5760405162461bcd60e51b815260206004820152601f60248201527f5374616b696e6720636f6e74726163742063616e6e6f74206265207a65726f00604482015260640161046e565b600380546001600160a01b0319166001600160a01b0392909216919091179055565b6000546001600160a01b031633146108465760405162461bcd60e51b815260206004820152600c60248201526b15539055551213d49256915160a21b604482015260640161046e565b600080546001600160a01b0319166001600160a01b0383169081178255604051909133917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e09190a350565b80356001600160a01b03811681146108a857600080fd5b919050565b6000602082840312156108bf57600080fd5b6108c882610891565b9392505050565b600080604083850312156108e257600080fd5b6108eb83610891565b946020939093013593505050565b6020808252825182820181905260009190848201906040850190845b8181101561093a5783516001600160a01b031683529284019291840191600101610915565b50909695505050505050565b6000806040838503121561095957600080fd5b61096283610891565b915061097060208401610891565b90509250929050565b634e487b7160e01b600052604160045260246000fd5b634e487b7160e01b600052603260045260246000fd5b6000600182016109c557634e487b7160e01b600052601160045260246000fd5b506001019056fea2646970667358221220e0a759fcee060d44415f0b2f806758b372c649379f7779ccb4b5db1a697f6d0264736f6c63430008140033",
  "devdoc": {
    "details": "Manages a referral system where users can be linked to their referrers, creating a hierarchical structure. It tracks direct referrals and allows traversal up the referral chain.",
    "kind": "dev",
    "methods": {
      "bindReferral(address,address)": {
        "details": "Binds a user to a referrer. This function is expected to be called by another contract (e.g., Staking contract) which performs its own checks.",
        "params": {
          "_referral": "The referrer's address.",
          "_user": "The user's address to be bound."
        }
      },
      "constructor": {
        "details": "Sets the root address of the referral tree. The root is considered its own referrer to allow the first level of referrals."
      },
      "getReferral(address)": {
        "details": "Gets the referrer of a given address.",
        "params": {
          "_address": "The address to query."
        },
        "returns": {
          "_0": "The referrer's address, or address(0) if none."
        }
      },
      "getReferralCount(address)": {
        "details": "Gets the number of direct referrals for a given address.",
        "params": {
          "_address": "The address to query."
        },
        "returns": {
          "_0": "The count of direct referrals."
        }
      },
      "getReferrals(address,uint256)": {
        "details": "Retrieves the referral chain for a user, up to a specified number of levels.",
        "params": {
          "_address": "The user's address.",
          "_num": "The maximum number of upline referrals to retrieve."
        },
        "returns": {
          "_0": "An array of addresses representing the referral chain, from direct parent upwards."
        }
      },
      "getRootAddress()": {
        "details": "Returns the root address of the referral system."
      },
      "isBindReferral(address)": {
        "details": "Checks if an address is part of the referral system.",
        "params": {
          "_address": "The address to check."
        },
        "returns": {
          "_0": "True if the address has a referrer, false otherwise."
        }
      },
      "setStakingContract(address)": {
        "details": "Sets the Staking contract address that is allowed to bind referrals."
      }
    },
    "title": "Referral Contract",
    "version": 1
  },
  "userdoc": {
    "kind": "user",
    "methods": {},
    "version": 1
  },
  "storageLayout": {
    "storage": [
      {
        "astId": 9937,
        "contract": "contracts/Referral.sol:Referral",
        "label": "owner",
        "offset": 0,
        "slot": "0",
        "type": "t_address"
      },
      {
        "astId": 9939,
        "contract": "contracts/Referral.sol:Referral",
        "label": "abandonedBalanceOwner",
        "offset": 0,
        "slot": "1",
        "type": "t_address"
      },
      {
        "astId": 9537,
        "contract": "contracts/Referral.sol:Referral",
        "label": "rootAddress",
        "offset": 0,
        "slot": "2",
        "type": "t_address"
      },
      {
        "astId": 9539,
        "contract": "contracts/Referral.sol:Referral",
        "label": "stakingContract",
        "offset": 0,
        "slot": "3",
        "type": "t_address"
      },
      {
        "astId": 9543,
        "contract": "contracts/Referral.sol:Referral",
        "label": "_referrals",
        "offset": 0,
        "slot": "4",
        "type": "t_mapping(t_address,t_address)"
      },
      {
        "astId": 9548,
        "contract": "contracts/Referral.sol:Referral",
        "label": "_children",
        "offset": 0,
        "slot": "5",
        "type": "t_mapping(t_address,t_array(t_address)dyn_storage)"
      }
    ],
    "types": {
      "t_address": {
        "encoding": "inplace",
        "label": "address",
        "numberOfBytes": "20"
      },
      "t_array(t_address)dyn_storage": {
        "base": "t_address",
        "encoding": "dynamic_array",
        "label": "address[]",
        "numberOfBytes": "32"
      },
      "t_mapping(t_address,t_address)": {
        "encoding": "mapping",
        "key": "t_address",
        "label": "mapping(address => address)",
        "numberOfBytes": "32",
        "value": "t_address"
      },
      "t_mapping(t_address,t_array(t_address)dyn_storage)": {
        "encoding": "mapping",
        "key": "t_address",
        "label": "mapping(address => address[])",
        "numberOfBytes": "32",
        "value": "t_array(t_address)dyn_storage"
      }
    }
  }
}