{
  "address": "0xA021AcDe734F0b97eB0E1Ec67Be2d700d628b789",
  "abi": [
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_root",
          "type": "address"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "user",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "newAdmin",
          "type": "address"
        }
      ],
      "name": "AdminTransferred",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "user",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "address",
          "name": "parent",
          "type": "address"
        }
      ],
      "name": "BindReferral",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "user",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "newOwner",
          "type": "address"
        }
      ],
      "name": "OwnershipTransferred",
      "type": "event"
    },
    {
      "inputs": [],
      "name": "abandonedBalanceOwner",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "admin",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_referral",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "_user",
          "type": "address"
        }
      ],
      "name": "bindReferral",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_address",
          "type": "address"
        }
      ],
      "name": "getReferral",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_address",
          "type": "address"
        }
      ],
      "name": "getReferralCount",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_address",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "_num",
          "type": "uint256"
        }
      ],
      "name": "getReferrals",
      "outputs": [
        {
          "internalType": "address[]",
          "name": "",
          "type": "address[]"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "getRootAddress",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_address",
          "type": "address"
        }
      ],
      "name": "isBindReferral",
      "outputs": [
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "owner",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "rootAddress",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_stakingContract",
          "type": "address"
        }
      ],
      "name": "setStakingContract",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "stakingContract",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "newOwner",
          "type": "address"
        }
      ],
      "name": "transferAbandonedBalanceOwnership",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "newAdmin",
          "type": "address"
        }
      ],
      "name": "transferAdmin",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "newOwner",
          "type": "address"
        }
      ],
      "name": "transferOwnership",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_referral",
          "type": "address"
        }
      ],
      "name": "userBindReferral",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    }
  ],
  "transactionHash": "0xd60b19f003e6fd36b53e243e2b78a561176bded07f91a25085172dce90369308",
  "receipt": {
    "to": null,
    "from": "0xC433386E6d4AF29764B243555df467BE280AcFda",
    "contractAddress": "0xA021AcDe734F0b97eB0E1Ec67Be2d700d628b789",
    "transactionIndex": 40,
    "gasUsed": "793176",
    "logsBloom": "0x00000000000000000000000008000000001000000080008000800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008000000000000000000001000000000020000000000010000000000000020000000000000000000800000000000000000000000000000000400000000000000000000000000000000000000200000000000000000000010000000000000000000000000000000000000000000000000000000000000000000040000000002000008000000000100000000000000000000000000000000020000000000000000000001000000000000000000000000000000800000000000000",
    "blockHash": "0x5391136f383f87a888043dd846c398ad30e534bd95aeb5cfa7cb51cba4bc7987",
    "transactionHash": "0xd60b19f003e6fd36b53e243e2b78a561176bded07f91a25085172dce90369308",
    "logs": [
      {
        "transactionIndex": 40,
        "blockNumber": 69550920,
        "transactionHash": "0xd60b19f003e6fd36b53e243e2b78a561176bded07f91a25085172dce90369308",
        "address": "0xA021AcDe734F0b97eB0E1Ec67Be2d700d628b789",
        "topics": [
          "0x8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e0",
          "0x0000000000000000000000000000000000000000000000000000000000000000",
          "0x000000000000000000000000c433386e6d4af29764b243555df467be280acfda"
        ],
        "data": "0x",
        "logIndex": 570,
        "blockHash": "0x5391136f383f87a888043dd846c398ad30e534bd95aeb5cfa7cb51cba4bc7987"
      },
      {
        "transactionIndex": 40,
        "blockNumber": 69550920,
        "transactionHash": "0xd60b19f003e6fd36b53e243e2b78a561176bded07f91a25085172dce90369308",
        "address": "0xA021AcDe734F0b97eB0E1Ec67Be2d700d628b789",
        "topics": [
          "0xf8ccb027dfcd135e000e9d45e6cc2d662578a8825d4c45b5e32e0adf67e79ec6",
          "0x0000000000000000000000000000000000000000000000000000000000000000",
          "0x000000000000000000000000c433386e6d4af29764b243555df467be280acfda"
        ],
        "data": "0x",
        "logIndex": 571,
        "blockHash": "0x5391136f383f87a888043dd846c398ad30e534bd95aeb5cfa7cb51cba4bc7987"
      },
      {
        "transactionIndex": 40,
        "blockNumber": 69550920,
        "transactionHash": "0xd60b19f003e6fd36b53e243e2b78a561176bded07f91a25085172dce90369308",
        "address": "0xA021AcDe734F0b97eB0E1Ec67Be2d700d628b789",
        "topics": [
          "0xcb282389824b9ba09f76f40ee522be8104006b13f0a7a8d78c2198a1cd1da468",
          "0x0000000000000000000000000f3b3484297bbcc02591c89b7df966084cd9503a"
        ],
        "data": "0x0000000000000000000000000f3b3484297bbcc02591c89b7df966084cd9503a",
        "logIndex": 572,
        "blockHash": "0x5391136f383f87a888043dd846c398ad30e534bd95aeb5cfa7cb51cba4bc7987"
      }
    ],
    "blockNumber": 69550920,
    "cumulativeGasUsed": "13965069",
    "status": 1,
    "byzantium": true
  },
  "args": [
    "0x0f3b3484297bBCC02591c89b7df966084CD9503A"
  ],
  "numDeployments": 1,
  "solcInputHash": "1d788683756d0a21089bdfbb1f7ae3d9",
  "metadata": "{\"compiler\":{\"version\":\"0.8.20+commit.a1b79de6\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_root\",\"type\":\"address\"}],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"user\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"newAdmin\",\"type\":\"address\"}],\"name\":\"AdminTransferred\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"user\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"address\",\"name\":\"parent\",\"type\":\"address\"}],\"name\":\"BindReferral\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"user\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"newOwner\",\"type\":\"address\"}],\"name\":\"OwnershipTransferred\",\"type\":\"event\"},{\"inputs\":[],\"name\":\"abandonedBalanceOwner\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"admin\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_referral\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"_user\",\"type\":\"address\"}],\"name\":\"bindReferral\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_address\",\"type\":\"address\"}],\"name\":\"getReferral\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_address\",\"type\":\"address\"}],\"name\":\"getReferralCount\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_address\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"_num\",\"type\":\"uint256\"}],\"name\":\"getReferrals\",\"outputs\":[{\"internalType\":\"address[]\",\"name\":\"\",\"type\":\"address[]\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"getRootAddress\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_address\",\"type\":\"address\"}],\"name\":\"isBindReferral\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"rootAddress\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_stakingContract\",\"type\":\"address\"}],\"name\":\"setStakingContract\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"stakingContract\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"newOwner\",\"type\":\"address\"}],\"name\":\"transferAbandonedBalanceOwnership\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"newAdmin\",\"type\":\"address\"}],\"name\":\"transferAdmin\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"newOwner\",\"type\":\"address\"}],\"name\":\"transferOwnership\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_referral\",\"type\":\"address\"}],\"name\":\"userBindReferral\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"}],\"devdoc\":{\"details\":\"Manages a referral system where users can be linked to their referrers, creating a hierarchical structure. It tracks direct referrals and allows traversal up the referral chain.\",\"kind\":\"dev\",\"methods\":{\"bindReferral(address,address)\":{\"details\":\"Binds a user to a referrer. This function is expected to be called by another contract (e.g., Staking contract) which performs its own checks.\",\"params\":{\"_referral\":\"The referrer's address.\",\"_user\":\"The user's address to be bound.\"}},\"constructor\":{\"details\":\"Sets the root address of the referral tree. The root is considered its own referrer to allow the first level of referrals.\"},\"getReferral(address)\":{\"details\":\"Gets the referrer of a given address.\",\"params\":{\"_address\":\"The address to query.\"},\"returns\":{\"_0\":\"The referrer's address, or address(0) if none.\"}},\"getReferralCount(address)\":{\"details\":\"Gets the number of direct referrals for a given address.\",\"params\":{\"_address\":\"The address to query.\"},\"returns\":{\"_0\":\"The count of direct referrals.\"}},\"getReferrals(address,uint256)\":{\"details\":\"Retrieves the referral chain for a user, up to a specified number of levels.\",\"params\":{\"_address\":\"The user's address.\",\"_num\":\"The maximum number of upline referrals to retrieve.\"},\"returns\":{\"_0\":\"An array of addresses representing the referral chain, from direct parent upwards.\"}},\"getRootAddress()\":{\"details\":\"Returns the root address of the referral system.\"},\"isBindReferral(address)\":{\"details\":\"Checks if an address is part of the referral system.\",\"params\":{\"_address\":\"The address to check.\"},\"returns\":{\"_0\":\"True if the address has a referrer, false otherwise.\"}},\"setStakingContract(address)\":{\"details\":\"Sets the Staking contract address that is allowed to bind referrals.\"}},\"title\":\"Referral Contract\",\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{},\"version\":1}},\"settings\":{\"compilationTarget\":{\"contracts/Referral.sol\":\"Referral\"},\"evmVersion\":\"paris\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\",\"useLiteralContent\":true},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[]},\"sources\":{\"contracts/Referral.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.13;\\n\\nimport \\\"./interfaces/IReferral.sol\\\";\\nimport \\\"./abstract/Owned.sol\\\";\\n\\n/**\\n * @title Referral Contract\\n * @dev Manages a referral system where users can be linked to their referrers,\\n * creating a hierarchical structure. It tracks direct referrals and allows\\n * traversal up the referral chain.\\n */\\ncontract Referral is IReferral, Owned {\\n    address public rootAddress;\\n    address public stakingContract;\\n\\n    // Mapping from a user to their referrer.\\n    mapping(address => address) private _referrals;\\n\\n    // Mapping from a referrer to their list of direct children.\\n    mapping(address => address[]) private _children;\\n\\n    /**\\n     * @dev Sets the root address of the referral tree.\\n     * The root is considered its own referrer to allow the first level of referrals.\\n     */\\n    constructor(address _root) Owned(msg.sender) {\\n        require(_root != address(0), \\\"Root address cannot be zero\\\");\\n        rootAddress = _root;\\n        _referrals[_root] = _root; // Root is its own parent to satisfy isBindReferral for the first level.\\n        emit BindReferral(_root, _root);\\n    }\\n\\n    modifier onlyStaking() {\\n        require(msg.sender == stakingContract, \\\"Caller is not the staking contract\\\");\\n        _;\\n    }\\n\\n    /**\\n     * @dev Sets the Staking contract address that is allowed to bind referrals.\\n     */\\n    function setStakingContract(address _stakingContract) external onlyOwner {\\n        require(_stakingContract != address(0), \\\"Staking contract cannot be zero\\\");\\n        stakingContract = _stakingContract;\\n    }\\n\\n    /**\\n     * @dev Returns the root address of the referral system.\\n     */\\n    function getRootAddress() external view override returns (address) {\\n        return rootAddress;\\n    }\\n\\n    /**\\n     * @dev Gets the referrer of a given address.\\n     * @param _address The address to query.\\n     * @return The referrer's address, or address(0) if none.\\n     */\\n    function getReferral(address _address) external view override returns (address) {\\n        return _referrals[_address];\\n    }\\n\\n    /**\\n     * @dev Checks if an address is part of the referral system.\\n     * @param _address The address to check.\\n     * @return True if the address has a referrer, false otherwise.\\n     */\\n    function isBindReferral(address _address) external view override returns (bool) {\\n        return _referrals[_address] != address(0);\\n    }\\n\\n    /**\\n     * @dev Gets the number of direct referrals for a given address.\\n     * @param _address The address to query.\\n     * @return The count of direct referrals.\\n     */\\n    function getReferralCount(address _address) external view override returns (uint256) {\\n        return _children[_address].length;\\n    }\\n\\n    /**\\n     * @dev Retrieves the referral chain for a user, up to a specified number of levels.\\n     * @param _address The user's address.\\n     * @param _num The maximum number of upline referrals to retrieve.\\n     * @return An array of addresses representing the referral chain, from direct parent upwards.\\n     */\\n    function getReferrals(address _address, uint256 _num) external view override returns (address[] memory) {\\n        address[] memory path = new address[](_num);\\n        uint256 count = 0;\\n        address currentParent = _referrals[_address];\\n\\n        // Traverse up the referral chain.\\n        // The condition `currentParent != _address` prevents an infinite loop if an address is its own referrer (like the root).\\n        while (currentParent != address(0) && currentParent != _address && count < _num) {\\n            path[count] = currentParent;\\n            count++;\\n            if (currentParent == rootAddress) {\\n                break;\\n            }\\n            currentParent = _referrals[currentParent];\\n        }\\n\\n        // Copy the results into a correctly sized array.\\n        address[] memory result = new address[](count);\\n        for (uint i = 0; i < count; i++) {\\n            result[i] = path[i];\\n        }\\n        return result;\\n    }\\n\\n    /**\\n     * @dev Binds a user to a referrer.\\n     * This function is expected to be called by another contract (e.g., Staking contract)\\n     * which performs its own checks.\\n     * @param _referral The referrer's address.\\n     * @param _user The user's address to be bound.\\n     */\\n    function bindReferral(address _referral, address _user) external override onlyStaking {\\n        require(_user != address(0), \\\"User is zero address\\\");\\n        require(_referral != address(0), \\\"Referral is zero address\\\");\\n        require(_user != _referral, \\\"User and referral cannot be the same\\\");\\n        require(_referrals[_user] == address(0), \\\"User already has a referral\\\");\\n        require(_referrals[_referral] != address(0), \\\"Referral is not bound\\\");\\n\\n        _referrals[_user] = _referral;\\n        _children[_referral].push(_user);\\n\\n        emit BindReferral(_user, _referral);\\n    }\\n\\n    function userBindReferral(address _referral) external {\\n        address _user = msg.sender;\\n        require(_referral != address(0), \\\"Referral is zero address\\\");\\n        require(_referrals[_user] == address(0), \\\"User already has a referral\\\");\\n        require(_referrals[_referral] != address(0), \\\"Referral is not bound\\\");\\n\\n        _referrals[_user] = _referral;\\n        _children[_referral].push(_user);\\n\\n        emit BindReferral(_user, _referral);\\n    }\\n}\\n\",\"keccak256\":\"0x535c2b650bf2fed154bb08c43499138b1061c034af5ab94c90369e21f7d81103\",\"license\":\"MIT\"},\"contracts/abstract/Owned.sol\":{\"content\":\"// SPDX-License-Identifier: AGPL-3.0-only\\npragma solidity >=0.8.0;\\n\\n/// @notice Simple single owner authorization mixin.\\n/// @author Solmate (https://github.com/transmissions11/solmate/blob/main/src/auth/Owned.sol)\\nabstract contract Owned {\\n    /*//////////////////////////////////////////////////////////////\\n                                 EVENTS\\n    //////////////////////////////////////////////////////////////*/\\n\\n    event OwnershipTransferred(address indexed user, address indexed newOwner);\\n    event AdminTransferred(address indexed user, address indexed newAdmin);\\n\\n    /*//////////////////////////////////////////////////////////////\\n                            OWNERSHIP STORAGE\\n    //////////////////////////////////////////////////////////////*/\\n\\n    address public owner;\\n    address public admin;\\n    // If a user mistakenly transfers tokens to this contract, this account can withdraw them.\\n    address public abandonedBalanceOwner;\\n\\n    modifier onlyOwner() virtual {\\n        require(msg.sender == owner, \\\"!owner\\\");\\n        _;\\n    }\\n\\n    modifier onlyAdmin() virtual {\\n        require(msg.sender == admin, '!admin');\\n        _;\\n    }\\n\\n    /*//////////////////////////////////////////////////////////////\\n                               CONSTRUCTOR\\n    //////////////////////////////////////////////////////////////*/\\n\\n    constructor(address _owner) {\\n        owner = _owner;\\n        admin = _owner;\\n        abandonedBalanceOwner = _owner;\\n\\n        emit OwnershipTransferred(address(0), _owner);\\n        emit AdminTransferred(address(0), _owner);\\n    }\\n\\n    /*//////////////////////////////////////////////////////////////\\n                             OWNERSHIP LOGIC\\n    //////////////////////////////////////////////////////////////*/\\n\\n    function transferOwnership(address newOwner) public virtual onlyOwner {\\n        owner = newOwner;\\n\\n        emit OwnershipTransferred(msg.sender, newOwner);\\n    }\\n\\n    function transferAdmin(address newAdmin) public virtual onlyAdmin {\\n        admin = newAdmin;\\n\\n        emit AdminTransferred(msg.sender, newAdmin);\\n    }\\n\\n    function transferAbandonedBalanceOwnership(address newOwner) public virtual {\\n        require(msg.sender == abandonedBalanceOwner, '!owner');\\n        abandonedBalanceOwner = newOwner;\\n    }\\n}\\n\",\"keccak256\":\"0x914f4e301bd4f42a21d29ac1535a38c7a505c6703bf285bdb5b21f839268a3d0\",\"license\":\"AGPL-3.0-only\"},\"contracts/interfaces/IReferral.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.13;\\n\\ninterface IReferral{\\n    \\n    event BindReferral(address indexed user,address parent);\\n    \\n    function getReferral(address _address)external view returns(address);\\n\\n    function isBindReferral(address _address) external view returns(bool);\\n\\n    function getReferralCount(address _address) external view returns(uint256);\\n\\n    function bindReferral(address _referral,address _user) external;\\n\\n    function getReferrals(address _address,uint256 _num) external view returns(address[] memory);\\n\\n    function getRootAddress()external view returns(address);\\n}\",\"keccak256\":\"0xbf02589354ae9980e2cf3665d08330f371c6353ebb598a3849d28644a3a5d6d3\",\"license\":\"MIT\"}},\"version\":1}",
  "bytecode": "0x608060405234801561001057600080fd5b50604051610cef380380610cef83398101604081905261002f91610187565b60008054336001600160a01b03199182168117835560018054831682179055600280549092168117909155604051909182917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e0908290a36040516001600160a01b038216906000907ff8ccb027dfcd135e000e9d45e6cc2d662578a8825d4c45b5e32e0adf67e79ec6908290a3506001600160a01b0381166101175760405162461bcd60e51b815260206004820152601b60248201527f526f6f7420616464726573732063616e6e6f74206265207a65726f0000000000604482015260640160405180910390fd5b600380546001600160a01b0383166001600160a01b0319918216811790925560008281526005602090815260409182902080549093168417909255518281527fcb282389824b9ba09f76f40ee522be8104006b13f0a7a8d78c2198a1cd1da468910160405180910390a2506101b7565b60006020828403121561019957600080fd5b81516001600160a01b03811681146101b057600080fd5b9392505050565b610b29806101c66000396000f3fe608060405234801561001057600080fd5b50600436106101005760003560e01c80639dd373b911610097578063f17c103b11610066578063f17c103b1461027d578063f2fde38b14610290578063f6d5660f146102a3578063f851a440146102b457600080fd5b80639dd373b914610206578063aaa2b8c814610219578063ee99205c1461022c578063eec76e041461023f57600080fd5b806375829def116100d357806375829def146101ba5780637a9a433c146101cd57806388a3e9e3146101e05780638da5cb5b146101f357600080fd5b806324acbd691461010557806332a00d8e146101415780633b0f0f2f146101615780636946431b146101a5575b600080fd5b61012e6101133660046109b4565b6001600160a01b031660009081526006602052604090205490565b6040519081526020015b60405180910390f35b61015461014f3660046109d6565b6102c7565b6040516101389190610a00565b61018d61016f3660046109b4565b6001600160a01b039081166000908152600560205260409020541690565b6040516001600160a01b039091168152602001610138565b6101b86101b33660046109b4565b61048a565b005b6101b86101c83660046109b4565b610636565b6101b86101db366004610a4d565b6106c5565b60025461018d906001600160a01b031681565b60005461018d906001600160a01b031681565b6101b86102143660046109b4565b610835565b60035461018d906001600160a01b031681565b60045461018d906001600160a01b031681565b61026d61024d3660046109b4565b6001600160a01b0390811660009081526005602052604090205416151590565b6040519015158152602001610138565b6101b861028b3660046109b4565b6108d7565b6101b861029e3660046109b4565b610923565b6003546001600160a01b031661018d565b60015461018d906001600160a01b031681565b606060008267ffffffffffffffff8111156102e4576102e4610a80565b60405190808252806020026020018201604052801561030d578160200160208202803683370190505b506001600160a01b0380861660009081526005602052604081205492935091165b6001600160a01b038116158015906103585750856001600160a01b0316816001600160a01b031614155b801561036357508482105b156103d7578083838151811061037b5761037b610a96565b6001600160a01b03909216602092830291909101909101528161039d81610aac565b6003549093506001600160a01b0383811691161490506103d7576001600160a01b039081166000908152600560205260409020541661032e565b60008267ffffffffffffffff8111156103f2576103f2610a80565b60405190808252806020026020018201604052801561041b578160200160208202803683370190505b50905060005b8381101561047f5784818151811061043b5761043b610a96565b602002602001015182828151811061045557610455610a96565b6001600160a01b03909216602092830291909101909101528061047781610aac565b915050610421565b509695505050505050565b336001600160a01b0382166104e15760405162461bcd60e51b8152602060048201526018602482015277526566657272616c206973207a65726f206164647265737360401b60448201526064015b60405180910390fd5b6001600160a01b0381811660009081526005602052604090205416156105495760405162461bcd60e51b815260206004820152601b60248201527f5573657220616c726561647920686173206120726566657272616c000000000060448201526064016104d8565b6001600160a01b03828116600090815260056020526040902054166105a85760405162461bcd60e51b8152602060048201526015602482015274149959995c9c985b081a5cc81b9bdd08189bdd5b99605a1b60448201526064016104d8565b6001600160a01b03818116600081815260056020908152604080832080549588166001600160a01b031996871681179091558084526006835281842080546001810182559085529383902090930180549095168417909455925190815290917fcb282389824b9ba09f76f40ee522be8104006b13f0a7a8d78c2198a1cd1da468910160405180910390a25050565b6001546001600160a01b031633146106795760405162461bcd60e51b815260206004820152600660248201526510b0b236b4b760d11b60448201526064016104d8565b600180546001600160a01b0319166001600160a01b03831690811790915560405133907ff8ccb027dfcd135e000e9d45e6cc2d662578a8825d4c45b5e32e0adf67e79ec690600090a350565b6004546001600160a01b0316331461072a5760405162461bcd60e51b815260206004820152602260248201527f43616c6c6572206973206e6f7420746865207374616b696e6720636f6e74726160448201526118dd60f21b60648201526084016104d8565b6001600160a01b0381166107775760405162461bcd60e51b815260206004820152601460248201527355736572206973207a65726f206164647265737360601b60448201526064016104d8565b6001600160a01b0382166107c85760405162461bcd60e51b8152602060048201526018602482015277526566657272616c206973207a65726f206164647265737360401b60448201526064016104d8565b816001600160a01b0316816001600160a01b0316036104e15760405162461bcd60e51b8152602060048201526024808201527f5573657220616e6420726566657272616c2063616e6e6f74206265207468652060448201526373616d6560e01b60648201526084016104d8565b6000546001600160a01b0316331461085f5760405162461bcd60e51b81526004016104d890610ad3565b6001600160a01b0381166108b55760405162461bcd60e51b815260206004820152601f60248201527f5374616b696e6720636f6e74726163742063616e6e6f74206265207a65726f0060448201526064016104d8565b600480546001600160a01b0319166001600160a01b0392909216919091179055565b6002546001600160a01b031633146109015760405162461bcd60e51b81526004016104d890610ad3565b600280546001600160a01b0319166001600160a01b0392909216919091179055565b6000546001600160a01b0316331461094d5760405162461bcd60e51b81526004016104d890610ad3565b600080546001600160a01b0319166001600160a01b0383169081178255604051909133917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e09190a350565b80356001600160a01b03811681146109af57600080fd5b919050565b6000602082840312156109c657600080fd5b6109cf82610998565b9392505050565b600080604083850312156109e957600080fd5b6109f283610998565b946020939093013593505050565b6020808252825182820181905260009190848201906040850190845b81811015610a415783516001600160a01b031683529284019291840191600101610a1c565b50909695505050505050565b60008060408385031215610a6057600080fd5b610a6983610998565b9150610a7760208401610998565b90509250929050565b634e487b7160e01b600052604160045260246000fd5b634e487b7160e01b600052603260045260246000fd5b600060018201610acc57634e487b7160e01b600052601160045260246000fd5b5060010190565b60208082526006908201526510b7bbb732b960d11b60408201526060019056fea2646970667358221220c7f7d9adfdde784a02c64b2a855246818395530dd169f296c15bf84a7dbcef5d64736f6c63430008140033",
  "deployedBytecode": "0x608060405234801561001057600080fd5b50600436106101005760003560e01c80639dd373b911610097578063f17c103b11610066578063f17c103b1461027d578063f2fde38b14610290578063f6d5660f146102a3578063f851a440146102b457600080fd5b80639dd373b914610206578063aaa2b8c814610219578063ee99205c1461022c578063eec76e041461023f57600080fd5b806375829def116100d357806375829def146101ba5780637a9a433c146101cd57806388a3e9e3146101e05780638da5cb5b146101f357600080fd5b806324acbd691461010557806332a00d8e146101415780633b0f0f2f146101615780636946431b146101a5575b600080fd5b61012e6101133660046109b4565b6001600160a01b031660009081526006602052604090205490565b6040519081526020015b60405180910390f35b61015461014f3660046109d6565b6102c7565b6040516101389190610a00565b61018d61016f3660046109b4565b6001600160a01b039081166000908152600560205260409020541690565b6040516001600160a01b039091168152602001610138565b6101b86101b33660046109b4565b61048a565b005b6101b86101c83660046109b4565b610636565b6101b86101db366004610a4d565b6106c5565b60025461018d906001600160a01b031681565b60005461018d906001600160a01b031681565b6101b86102143660046109b4565b610835565b60035461018d906001600160a01b031681565b60045461018d906001600160a01b031681565b61026d61024d3660046109b4565b6001600160a01b0390811660009081526005602052604090205416151590565b6040519015158152602001610138565b6101b861028b3660046109b4565b6108d7565b6101b861029e3660046109b4565b610923565b6003546001600160a01b031661018d565b60015461018d906001600160a01b031681565b606060008267ffffffffffffffff8111156102e4576102e4610a80565b60405190808252806020026020018201604052801561030d578160200160208202803683370190505b506001600160a01b0380861660009081526005602052604081205492935091165b6001600160a01b038116158015906103585750856001600160a01b0316816001600160a01b031614155b801561036357508482105b156103d7578083838151811061037b5761037b610a96565b6001600160a01b03909216602092830291909101909101528161039d81610aac565b6003549093506001600160a01b0383811691161490506103d7576001600160a01b039081166000908152600560205260409020541661032e565b60008267ffffffffffffffff8111156103f2576103f2610a80565b60405190808252806020026020018201604052801561041b578160200160208202803683370190505b50905060005b8381101561047f5784818151811061043b5761043b610a96565b602002602001015182828151811061045557610455610a96565b6001600160a01b03909216602092830291909101909101528061047781610aac565b915050610421565b509695505050505050565b336001600160a01b0382166104e15760405162461bcd60e51b8152602060048201526018602482015277526566657272616c206973207a65726f206164647265737360401b60448201526064015b60405180910390fd5b6001600160a01b0381811660009081526005602052604090205416156105495760405162461bcd60e51b815260206004820152601b60248201527f5573657220616c726561647920686173206120726566657272616c000000000060448201526064016104d8565b6001600160a01b03828116600090815260056020526040902054166105a85760405162461bcd60e51b8152602060048201526015602482015274149959995c9c985b081a5cc81b9bdd08189bdd5b99605a1b60448201526064016104d8565b6001600160a01b03818116600081815260056020908152604080832080549588166001600160a01b031996871681179091558084526006835281842080546001810182559085529383902090930180549095168417909455925190815290917fcb282389824b9ba09f76f40ee522be8104006b13f0a7a8d78c2198a1cd1da468910160405180910390a25050565b6001546001600160a01b031633146106795760405162461bcd60e51b815260206004820152600660248201526510b0b236b4b760d11b60448201526064016104d8565b600180546001600160a01b0319166001600160a01b03831690811790915560405133907ff8ccb027dfcd135e000e9d45e6cc2d662578a8825d4c45b5e32e0adf67e79ec690600090a350565b6004546001600160a01b0316331461072a5760405162461bcd60e51b815260206004820152602260248201527f43616c6c6572206973206e6f7420746865207374616b696e6720636f6e74726160448201526118dd60f21b60648201526084016104d8565b6001600160a01b0381166107775760405162461bcd60e51b815260206004820152601460248201527355736572206973207a65726f206164647265737360601b60448201526064016104d8565b6001600160a01b0382166107c85760405162461bcd60e51b8152602060048201526018602482015277526566657272616c206973207a65726f206164647265737360401b60448201526064016104d8565b816001600160a01b0316816001600160a01b0316036104e15760405162461bcd60e51b8152602060048201526024808201527f5573657220616e6420726566657272616c2063616e6e6f74206265207468652060448201526373616d6560e01b60648201526084016104d8565b6000546001600160a01b0316331461085f5760405162461bcd60e51b81526004016104d890610ad3565b6001600160a01b0381166108b55760405162461bcd60e51b815260206004820152601f60248201527f5374616b696e6720636f6e74726163742063616e6e6f74206265207a65726f0060448201526064016104d8565b600480546001600160a01b0319166001600160a01b0392909216919091179055565b6002546001600160a01b031633146109015760405162461bcd60e51b81526004016104d890610ad3565b600280546001600160a01b0319166001600160a01b0392909216919091179055565b6000546001600160a01b0316331461094d5760405162461bcd60e51b81526004016104d890610ad3565b600080546001600160a01b0319166001600160a01b0383169081178255604051909133917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e09190a350565b80356001600160a01b03811681146109af57600080fd5b919050565b6000602082840312156109c657600080fd5b6109cf82610998565b9392505050565b600080604083850312156109e957600080fd5b6109f283610998565b946020939093013593505050565b6020808252825182820181905260009190848201906040850190845b81811015610a415783516001600160a01b031683529284019291840191600101610a1c565b50909695505050505050565b60008060408385031215610a6057600080fd5b610a6983610998565b9150610a7760208401610998565b90509250929050565b634e487b7160e01b600052604160045260246000fd5b634e487b7160e01b600052603260045260246000fd5b600060018201610acc57634e487b7160e01b600052601160045260246000fd5b5060010190565b60208082526006908201526510b7bbb732b960d11b60408201526060019056fea2646970667358221220c7f7d9adfdde784a02c64b2a855246818395530dd169f296c15bf84a7dbcef5d64736f6c63430008140033",
  "devdoc": {
    "details": "Manages a referral system where users can be linked to their referrers, creating a hierarchical structure. It tracks direct referrals and allows traversal up the referral chain.",
    "kind": "dev",
    "methods": {
      "bindReferral(address,address)": {
        "details": "Binds a user to a referrer. This function is expected to be called by another contract (e.g., Staking contract) which performs its own checks.",
        "params": {
          "_referral": "The referrer's address.",
          "_user": "The user's address to be bound."
        }
      },
      "constructor": {
        "details": "Sets the root address of the referral tree. The root is considered its own referrer to allow the first level of referrals."
      },
      "getReferral(address)": {
        "details": "Gets the referrer of a given address.",
        "params": {
          "_address": "The address to query."
        },
        "returns": {
          "_0": "The referrer's address, or address(0) if none."
        }
      },
      "getReferralCount(address)": {
        "details": "Gets the number of direct referrals for a given address.",
        "params": {
          "_address": "The address to query."
        },
        "returns": {
          "_0": "The count of direct referrals."
        }
      },
      "getReferrals(address,uint256)": {
        "details": "Retrieves the referral chain for a user, up to a specified number of levels.",
        "params": {
          "_address": "The user's address.",
          "_num": "The maximum number of upline referrals to retrieve."
        },
        "returns": {
          "_0": "An array of addresses representing the referral chain, from direct parent upwards."
        }
      },
      "getRootAddress()": {
        "details": "Returns the root address of the referral system."
      },
      "isBindReferral(address)": {
        "details": "Checks if an address is part of the referral system.",
        "params": {
          "_address": "The address to check."
        },
        "returns": {
          "_0": "True if the address has a referrer, false otherwise."
        }
      },
      "setStakingContract(address)": {
        "details": "Sets the Staking contract address that is allowed to bind referrals."
      }
    },
    "title": "Referral Contract",
    "version": 1
  },
  "userdoc": {
    "kind": "user",
    "methods": {},
    "version": 1
  },
  "storageLayout": {
    "storage": [
      {
        "astId": 11710,
        "contract": "contracts/Referral.sol:Referral",
        "label": "owner",
        "offset": 0,
        "slot": "0",
        "type": "t_address"
      },
      {
        "astId": 11712,
        "contract": "contracts/Referral.sol:Referral",
        "label": "admin",
        "offset": 0,
        "slot": "1",
        "type": "t_address"
      },
      {
        "astId": 11714,
        "contract": "contracts/Referral.sol:Referral",
        "label": "abandonedBalanceOwner",
        "offset": 0,
        "slot": "2",
        "type": "t_address"
      },
      {
        "astId": 11175,
        "contract": "contracts/Referral.sol:Referral",
        "label": "rootAddress",
        "offset": 0,
        "slot": "3",
        "type": "t_address"
      },
      {
        "astId": 11177,
        "contract": "contracts/Referral.sol:Referral",
        "label": "stakingContract",
        "offset": 0,
        "slot": "4",
        "type": "t_address"
      },
      {
        "astId": 11181,
        "contract": "contracts/Referral.sol:Referral",
        "label": "_referrals",
        "offset": 0,
        "slot": "5",
        "type": "t_mapping(t_address,t_address)"
      },
      {
        "astId": 11186,
        "contract": "contracts/Referral.sol:Referral",
        "label": "_children",
        "offset": 0,
        "slot": "6",
        "type": "t_mapping(t_address,t_array(t_address)dyn_storage)"
      }
    ],
    "types": {
      "t_address": {
        "encoding": "inplace",
        "label": "address",
        "numberOfBytes": "20"
      },
      "t_array(t_address)dyn_storage": {
        "base": "t_address",
        "encoding": "dynamic_array",
        "label": "address[]",
        "numberOfBytes": "32"
      },
      "t_mapping(t_address,t_address)": {
        "encoding": "mapping",
        "key": "t_address",
        "label": "mapping(address => address)",
        "numberOfBytes": "32",
        "value": "t_address"
      },
      "t_mapping(t_address,t_array(t_address)dyn_storage)": {
        "encoding": "mapping",
        "key": "t_address",
        "label": "mapping(address => address[])",
        "numberOfBytes": "32",
        "value": "t_array(t_address)dyn_storage"
      }
    }
  }
}